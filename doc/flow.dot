digraph {
	node[shape=record, height="0.4", width="0.4"]
	{ rank=same; flags_in; mimm_in; addr_in; data_in; minstr_in; state_in; waddr_in; pc_in; sync_in }
	{ rank=same; flags_out; mimm_out; addr_out; data_out; minstr_out; state_out; waddr_out; pc_out }
	{ rank=same; imm_sel; instr_sel; minstr_sel }
	{ rank=same; pc_sel; waddr_sel; flags_sel; addr_sel; res_sel }
	flags_in -> cond [label="flags"]
	instr_sel -> cond [label="cond"]
	sync_in -> cond [label="sync"]
	cond -> pc_sel [label="jump"]
	pc_in -> pc_incr [label="pc"]
	pc_in -> pc_sel [label="pc"]
	pc_incr -> pc_sel [label="pc_incr"]
	sec_sel -> pc_sel [label="pc_sec"]
	pc_sel -> pc_out [label="pc"]
	waddr_sel -> waddr_out [label="waddr"]
	waddr_in -> waddr_sel [label="waddr"]
	alu -> waddr_sel [label="res"]
	addr_in -> ram [label="addr"]
	data_in -> ram [label="data"]
	ram -> imm_sel [label="imm_ram"]
	mimm_in -> imm_sel [label="imm_m"]
	state_in -> imm_sel [label="state"]
	imm_sel -> sec_sel [label="imm"]
	r_read -> sec_sel [label="r3"]
	instr_sel -> sec_sel [label="mode"]
	instr_sel -> alu [label="op"]
	sec_sel -> alu [label="sec"]
	r_read -> alu [label="pri"]
	flags_in -> alu [label="flags"]
	flags_in -> flags_sel [label="oflags"]
	alu -> flags_sel [label="nflags"]
	flags_sel -> flags_out [label="flags"]
	instr_sel -> r_read [label="i3"]
	instr_sel -> r_read [label="i2"]
	ram -> mimm_out [label="imm"]
	ram -> minstr_sel [label="instr"]
	state_in -> minstr_sel [label="state"]
	minstr_sel -> minstr_out [label="minstr"]
	alu -> addr_sel [label="res"]
	waddr_in -> addr_sel [label="prevres"]
	pc_incr -> addr_sel [label="pc_incr"]
	state_in -> addr_sel [label="state"]
	addr_sel -> addr_out [label="addr"]
	minstr_in -> instr_sel [label="minstr"]
	state_in -> instr_sel [label="state"]
	ram -> instr_sel [label="instr"]
	res_sel -> r_write [label="wdata"]
	alu -> res_sel [label="res"]
	instr_sel -> res_sel [label="instr"]
	state_in -> res_sel [label="state"]
	pc_incr -> res_sel [label="pc_incr"]
	i1_sel -> r_write [label="i1"]
	state_in -> i1_sel [label="is_write"]
	instr_sel -> i1_sel [label="i1_instr"]
	state_in -> next_state [label="state"]
	instr_sel -> next_state [label="instr"]
	next_state -> state_out [label="state"]
	alu -> data_out [label="res"]
	instr_sel -> flags_sel [label="wflags"]
}
